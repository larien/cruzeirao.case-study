
<ui:composition template="templateMenu.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui2="http://java.sun.com/jsf/facelets">

	<ui:define name="title">
		<h:outputText value="#{msg['pages.cadastroCampeonato.title']}" />
	</ui:define>

	<ui:define name="principal">
		<script type="text/javascript">
			function handleLocalDrop(event, ui) {
				var droppedLocal = ui.draggable;
				droppedLocal.fadeOut('fast');
			}
		</script>
		<h1>
			<p:outputLabel value="#{msg['pages.cadastroCampeonato.menu']}" />
		</h1>

		<h:form id="formCampeonato">
			<p:growl id="growl" showDetail="true" />
			<p:panelGrid columns="2">
				<p:outputLabel value="#{msg['pages.cadastroCampeonato.nome']}" />
				<p:inputText value="#{campeonatoMB.campeonato.nome}" />

				<p:outputLabel
					value="#{msg['pages.cadastroCampeonato.dataInicioInscricao']}" />
				<p:calendar value="#{campeonatoMB.campeonato.dataInicioInscricao}" />

				<p:outputLabel
					value="#{msg['pages.cadastroCampeonato.dataFimInscricao']}" />
				<p:calendar value="#{campeonatoMB.campeonato.dataFimInscricao}" />

				<p:outputLabel
					value="#{msg['pages.cadastroCampeonato.dataInicioCampeonato']}" />
				<p:calendar value="#{campeonatoMB.campeonato.dataInicioCampeonato}" />

				<p:outputLabel
					value="#{msg['pages.cadastroCampeonato.dataFimCampeonato']}" />
				<p:calendar value="#{campeonatoMB.campeonato.dataFimCampeonato}" />

			</p:panelGrid>

			<p:commandButton value="#{msg['pages.cadastroCampeonato.btnSalvar']}"
				action="#{campeonatoMB.salvar}"
				update=":formCampeonato :tabelaCampeonato" />
		</h:form>

		<p:commandButton id="juizBtn"
			value="#{msg['pages.cadastroCampeonato.juiz']}" type="button" />
		<p:sidebar widgetVar="sidebar5" fullScreen="true" baseZIndex="10000">

			<h1>
				<p:outputLabel value="#{msg['pages.cadastroCategoria.menu']}" />
			</h1>

			<h1 style="font-weight: normal">Ohhh aqui vai um texto!!!</h1>
			<h2 style="font-weight: normal">Seria bom listar os campeonatos
				cadastrados?</h2>
			<p:dataTable id="campeonatosCadastrados" var="categoria"
				value="#{campeonatoMB.campeonato.categorias}">
				<p:column headerText="#{msg['pages.cadastroCategoria.nome']}">
					<h:outputText value="#{categoria.nome}" />
				</p:column>
			</p:dataTable>

			<p:commandButton value="Cancel" oncomplete="PF('sidebar5').hide()" />

		</p:sidebar>

		<p:overlayPanel id="juizPanel" for="juizBtn" hideEffect="fade"
			dynamic="true" style="width:600px">
			<p:fieldset id="availableJuizesField"
				legend="#{msg['pages.cadastroCampeonato.juizesDisponiveis']}">
				<p:dataTable id="availableJuizes" var="juiz"
					value="#{juizMB.juizes}">
					<p:column style="width:20px">
						<h:outputText id="dragIcon" styleClass="ui-icon ui-icon-arrow-4" />
						<p:draggable for="dragIcon" revert="true" helper="clone" />
					</p:column>

					<p:column headerText="#{msg['pages.cadastroCampeonato.usuario']}">
						<h:outputText value="#{juiz.usuario}" />
					</p:column>

				</p:dataTable>
			</p:fieldset>

			<p:fieldset id="selectedJuizes"
				legend="#{msg['pages.cadastroCampeonato.juizesSelecionados']}"
				style="margin-top:20px">
				<p:outputPanel id="dropJuizArea">
					<h:outputText value="#{msg['pages.cadastroCampeonato.dropAqui']}"
						rendered="#{empty campeonatoMB.campeonato.juizes}"
						style="font-size:24px;" />
					<p:dataTable id="selectedJuizesTable" var="juiz"
						value="#{campeonatoMB.campeonato.juizes}"
						rendered="#{not empty campeonatoMB.campeonato.juizes}">
						<p:column headerText="#{msg['pages.cadastroCampeonato.usuario']}">
							<h:outputText value="#{juiz.usuario}" />
						</p:column>
					</p:dataTable>
				</p:outputPanel>
			</p:fieldset>

			<p:droppable for="selectedJuizes" tolerance="touch"
				activeStyleClass="ui-state-highlight" datasource="availableJuizes"
				onDrop="handleDropJuiz">
				<p:ajax listener="#{campeonatoMB.onJuizDrop}"
					update="dropJuizArea availableJuizes" />
			</p:droppable>
		</p:overlayPanel>




		<!--  por fim a tabela para dos campeonatos cadastrados -->
		<p:dataTable value="#{campeonatoMB.campeonatos}" var="aux"
			id="tabelaCampeonato">
			
			
			
			
			<p:column headerText="#{msg['pages.cadastroCampeonato.nome']}">
				<p:outputLabel value="#{aux.nome}" />
			</p:column>




			<!--  Pega local utilizando parametros -->
			<p:column headerText="#{msg['pages.cadastroCampeonato.local']}">
				<p:commandButton id="localBtn"
					value="#{msg['pages.cadastroCampeonato.local']}" type="button" />

				<!--  painel para o cadastro de locais -->
				<p:overlayPanel id="localPanel" for="localBtn" hideEffect="fade"
					dynamic="true" style="width:600px">
					<!--  lista todos os locais cadastrados -->
					<p:fieldset id="availableLocaisField"
						legend="#{msg['pages.cadastroCampeonato.locaisDisponiveis']}">
						<p:dataTable id="availableLocais" var="local"
							value="#{localMB.locais}">
							<p:column style="width:20px">
								<h:outputText id="dragIcon" styleClass="ui-icon ui-icon-arrow-4" />
								<p:draggable for="dragIcon" revert="true" helper="clone" />
							</p:column>

							<p:column
								headerText="#{msg['pages.cadastroCampeonato.endereco']}">
								<h:outputText value="#{local.endereco}" />
							</p:column>

						</p:dataTable>
					</p:fieldset>

					<!--  lista todos cadastros salvos na lista do campeonato -->
					<p:fieldset id="selectedLocais"
						legend="#{msg['pages.cadastroCampeonato.locaisSelecionados']}"
						style="margin-top:20px">
						<p:outputPanel id="dropLocalArea">
							<h:outputText value="#{msg['pages.cadastroCampeonato.dropAqui']}"
								rendered="#{empty aux.locais}"
								style="font-size:24px;" />
								
							<p:dataTable id="selectedLocaisTable" var="local"
								value="#{aux.locais}"
								rendered="#{not empty aux.locais}">
								<p:column
									headerText="#{msg['pages.cadastroCampeonato.endereco']}">
									<h:outputText value="#{local.endereco}" />
								</p:column>
							</p:dataTable>
						</p:outputPanel>
					</p:fieldset>

					<p:droppable for="selectedLocais" tolerance="touch"
						activeStyleClass="ui-state-highlight" datasource="availableLocais"
						onDrop="handleLocalDrop">
						<f:attribute name="campeonato" value="#{aux}" />
						<p:ajax listener="#{campeonatoMB.onLocalDrop}"
							update="dropLocalArea availableLocais" />
					</p:droppable>

				</p:overlayPanel>

			</p:column>




			<p:column headerText="#{msg['pages.cadastroCampeonato.juiz']}">
				<p:outputLabel value="#{aux.juizes}" />
			</p:column>




			<p:column headerText="#{msg['pages.cadastroCampeonato.categoria']}">
					<p:commandButton value="#{msg['pages.cadastroCampeonato.categoria']}" action="cadastroCategoria.xhtml" actionListener="#{categoriaMB.editarCategoria}">
					    <f:attribute name="categorias" value="#{aux.categorias}" />
					    <f:attribute name="campeonato" value="#{aux}" />
					</p:commandButton>
			</p:column>




			<p:column
				headerText="#{msg['pages.cadastroCampeonato.dataInicioInscricao']}">
				<p:outputLabel value="#{aux.dataInicioInscricao}" />
			</p:column>




			<p:column
				headerText="#{msg['pages.cadastroCampeonato.dataFimInscricao']}">
				<p:outputLabel value="#{aux.dataFimInscricao}" />
			</p:column>
			
			


			<p:column
				headerText="#{msg['pages.cadastroCampeonato.dataInicioCampeonato']}">
				<p:outputLabel value="#{aux.dataInicioCampeonato}" />
			</p:column>




			<p:column
				headerText="#{msg['pages.cadastroCampeonato.dataFimCampeonato']}">
				<p:outputLabel value="#{aux.dataFimCampeonato}" />
			</p:column>


		</p:dataTable>

	</ui:define>
</ui:composition>